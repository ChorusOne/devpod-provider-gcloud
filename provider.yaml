name: gcloud
version: 0.0.1
description: |-
  DevPod on Google Cloud
options:
  PROJECT:
    description: The project id to use.
    required: true
    command: gcloud config list --quiet --verbosity=error --format "value(core.project)" || true
  ZONE:
    description: The google cloud zone to create the VM in. E.g. europe-west1-d
    required: true
    command: gcloud config list --quiet --verbosity=error --format "value(compute.zone)" || true
  DISK_SIZE:
    description: The disk size to use.
    default: "40"
  DISK_IMAGE:
    description: The disk image to use.
    default: projects/cos-cloud/global/images/cos-101-17162-127-5
  MACHINE_TYPE:
    description: The machine type to use.
    default: c2-standard-4
  INACTIVITY_TIMEOUT:
    description: If defined, will automatically stop the VM after the inactivity period.
    default: 10m
  INJECT_GIT_CREDENTIALS:
    description: "If DevPod should inject git credentials into the remote host."
    default: "true"
  INJECT_DOCKER_CREDENTIALS:
    description: "If DevPod should inject docker credentials into the remote host."
    default: "true"
  AGENT_PATH:
    description: The path where to inject the DevPod agent to.
    default: /var/lib/toolbox/devpod
agent:
  path: ${AGENT_PATH}
  inactivityTimeout: ${INACTIVITY_TIMEOUT}
  injectGitCredentials: ${INJECT_GIT_CREDENTIALS}
  injectDockerCredentials: ${INJECT_DOCKER_CREDENTIALS}
  exec:
    shutdown: |-
      shutdown -n now
exec:
  command: ${DEVPOD} provider call gcloud command
  create: ${DEVPOD} provider call gcloud create
  delete: ${DEVPOD} provider call gcloud delete
  start: ${DEVPOD} provider call gcloud start
  stop: ${DEVPOD} provider call gcloud stop
  status: ${DEVPOD} provider call gcloud status